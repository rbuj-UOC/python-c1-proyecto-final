services:

  appointment:
    build:
      context: ./docker/appointment
      dockerfile: Dockerfile
    container_name: appointment-service
    ports:
      - "5001:5001"
    environment:
      - FLASK_ENV=development
      - PORT=5001
      - ADMIN_PORT=5002
      - ADMIN_HOST=admin-service
      - SECRET_KEY=dev-secret-key-change-in-production
      - DATABASE_PATH=/app/data/appointments.db
    volumes:
      - ./src/appointment:/app
      - appointment-db-data:/app/data
    networks:
      - microservices-network

  admin:
    build:
      context: ./docker/admin
      dockerfile: Dockerfile
    container_name: admin-service
    ports:
      - "5002:5002"
    environment:
      - FLASK_ENV=development
      - PORT=5002
      - SECRET_KEY=dev-secret-key-change-in-production
      - DEFAULT_ADMIN_USER=admin
      - DEFAULT_ADMIN_PASSWORD=admin123
      - DEFAULT_ADMIN_ROLE=admin
      - DATABASE_PATH=/app/data/admin.db
    volumes:
      - ./src/admin:/app
      - admin-db-data:/app/data
    networks:
      - microservices-network

networks:
  microservices-network:
    driver: bridge

volumes:
  admin-db-data:
    driver: local
  appointment-db-data:
    driver: local
